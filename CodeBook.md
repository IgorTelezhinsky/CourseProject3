# Code Book for the Tidy Data of the Course Project (Getting and Cleaning Data Class).
Igor Telezhinsky  
2015-11-22  

## Project Description
The purpose of this project is to demonstrate the ability to collect, work with, and clean a data set.
The goal is to prepare tidy data that can be used for later analysis.

##Study design and data processing

###Collection of the raw data

The data for the project represent data collected from the accelerometers 
of the Samsung Galaxy S2 smartphones attached to the waist bands of 30 people
and recording their activity throughout the day. The data can be download from

https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip

A full description is available at the site where the data was originally obtained:

http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones

###Notes on the original (raw) data 
The original data contains two data sets: test and training raw data sets stored in several files. Each of these data set contains besides raw also processed and filtered data that is not used in the current project. The files used to obtain tidy data are:


1. `README.txt`          -- general info about data set
2. `features_info.txt`   -- description variable names
3. `features.txt`        -- columns names in data files (variables)
4. `activity_labels.txt` -- activities code-name connection
5. `X_test.txt`          -- test data set
6. `y_test.txt`          -- activity codes in the test data set
7. `subject_test.txt`    -- subject (a person given a number) performing a given activity in the test data set
8. `X_train.txt`         -- training data set
9. `y_train.txt`         -- activity codes in the training data set
10. `subject_train.txt`   -- subject (a person given a number) performing a given activity in the training data set.

##Creating the tidy datafile

###Guide to create the tidy data file

To create the tidy data file source `run_analysis.R` script and execute `run_analysis(work_dir,outfile,data_dir)` function, where
`work_dir` is the working directory path, `outfile` is the output file name and `data_dir` is where the raw data will be extracted
from the automatically downloaded zip archive. Both last arguments are relative to the working directory path. At least `work_dir`
must be specified. Other variables are optional with the default values set to 
`outfile="tidy_data.txt"` and `data_dir="RawData"`. For particular example see README file.

###Cleaning of the data steps

The `run_analysis()` function of the `run_analysis.R` script goes through the following steps:

1. downloads the raw data
2. unpacks the raw data
3. prepares the data set as it should be in Step 4 of the Project Task
    - reads activity names
    - reads raw data variables' names
    - reads test data files and introduces descriptive variable names
    - reads training data files and introduces descriptive variable names
    - gets column indeces of various *mean* and *std* quantities in raw data
    - selects *mean* and *std* columns from the raw data sets (test and training) and combines these data into a single data frame
    - introduces descriptive activity names to this data frame
4. melts Step 4 data set with `id=c("Activity","Subject")`
5. casts the molten data set and computes mean for `variables`
6. renames the first column to "Activity.Subject"
7. writes down the tidy data set.

##Description of the variables in the tidy_data.txt (outfile)
The file contains the tidy data set of 180 rows by 80 columns. The following summary is compiled with


```r
source('./run_analysis.R')
tidy<-read_tidy("tidy_data.txt")
str(tidy)
```

```
## 'data.frame':	180 obs. of  80 variables:
##  $ Subject.Activity               : Factor w/ 180 levels "1.LAYING","1.SITTING",..: 1 67 133 145 151 157 163 169 175 7 ...
##  $ tBodyAcc.mean...X              : num  0.222 0.281 0.276 0.264 0.278 ...
##  $ tBodyAcc.mean...Y              : num  -0.0405 -0.0182 -0.019 -0.015 -0.0183 ...
##  $ tBodyAcc.mean...Z              : num  -0.113 -0.107 -0.101 -0.111 -0.108 ...
##  $ tGravityAcc.mean...X           : num  -0.249 -0.51 -0.242 -0.421 -0.483 ...
##  $ tGravityAcc.mean...Y           : num  0.706 0.753 0.837 0.915 0.955 ...
##  $ tGravityAcc.mean...Z           : num  0.446 0.647 0.489 0.342 0.264 ...
##  $ tBodyAccJerk.mean...X          : num  0.0811 0.0826 0.077 0.0934 0.0848 ...
##  $ tBodyAccJerk.mean...Y          : num  0.00384 0.01225 0.0138 0.00693 0.00747 ...
##  $ tBodyAccJerk.mean...Z          : num  0.01083 -0.0018 -0.00436 -0.00641 -0.00304 ...
##  $ tBodyGyro.mean...X             : num  -0.01655 -0.01848 -0.02082 -0.00923 -0.02189 ...
##  $ tBodyGyro.mean...Y             : num  -0.0645 -0.1118 -0.0719 -0.093 -0.0799 ...
##  $ tBodyGyro.mean...Z             : num  0.149 0.145 0.138 0.17 0.16 ...
##  $ tBodyGyroJerk.mean...X         : num  -0.107 -0.102 -0.1 -0.105 -0.102 ...
##  $ tBodyGyroJerk.mean...Y         : num  -0.0415 -0.0359 -0.039 -0.0381 -0.0404 ...
##  $ tBodyGyroJerk.mean...Z         : num  -0.0741 -0.0702 -0.0687 -0.0712 -0.0708 ...
##  $ tBodyAccMag.mean..             : num  -0.842 -0.977 -0.973 -0.955 -0.967 ...
##  $ tGravityAccMag.mean..          : num  -0.842 -0.977 -0.973 -0.955 -0.967 ...
##  $ tBodyAccJerkMag.mean..         : num  -0.954 -0.988 -0.979 -0.97 -0.98 ...
##  $ tBodyGyroMag.mean..            : num  -0.875 -0.95 -0.952 -0.93 -0.947 ...
##  $ tBodyGyroJerkMag.mean..        : num  -0.963 -0.992 -0.987 -0.985 -0.986 ...
##  $ fBodyAcc.mean...X              : num  -0.939 -0.977 -0.981 -0.959 -0.969 ...
##  $ fBodyAcc.mean...Y              : num  -0.867 -0.98 -0.961 -0.939 -0.965 ...
##  $ fBodyAcc.mean...Z              : num  -0.883 -0.984 -0.968 -0.968 -0.977 ...
##  $ fBodyAcc.meanFreq...X          : num  -0.159 -0.146 -0.074 -0.274 -0.136 ...
##  $ fBodyAcc.meanFreq...Y          : num  0.0975 0.2573 0.2385 0.3662 0.4665 ...
##  $ fBodyAcc.meanFreq...Z          : num  0.0894 0.4025 0.217 0.2013 0.1323 ...
##  $ fBodyAccJerk.mean...X          : num  -0.957 -0.986 -0.981 -0.979 -0.983 ...
##  $ fBodyAccJerk.mean...Y          : num  -0.922 -0.983 -0.969 -0.944 -0.965 ...
##  $ fBodyAccJerk.mean...Z          : num  -0.948 -0.986 -0.979 -0.975 -0.983 ...
##  $ fBodyAccJerk.meanFreq...X      : num  0.132 0.16 0.176 0.182 0.24 ...
##  $ fBodyAccJerk.meanFreq...Y      : num  0.0245 0.1212 -0.0132 0.0987 0.1957 ...
##  $ fBodyAccJerk.meanFreq...Z      : num  0.0244 0.1906 0.0448 0.077 0.0917 ...
##  $ fBodyGyro.mean...X             : num  -0.85 -0.986 -0.97 -0.967 -0.976 ...
##  $ fBodyGyro.mean...Y             : num  -0.952 -0.983 -0.978 -0.972 -0.978 ...
##  $ fBodyGyro.mean...Z             : num  -0.909 -0.963 -0.962 -0.961 -0.963 ...
##  $ fBodyGyro.meanFreq...X         : num  -0.00355 0.10261 -0.08222 -0.06609 -0.02272 ...
##  $ fBodyGyro.meanFreq...Y         : num  -0.0915 0.0423 -0.0267 -0.5269 0.0681 ...
##  $ fBodyGyro.meanFreq...Z         : num  0.0105 0.0553 0.1477 0.1529 0.0414 ...
##  $ fBodyAccMag.mean..             : num  -0.862 -0.975 -0.966 -0.939 -0.962 ...
##  $ fBodyAccMag.meanFreq..         : num  0.0864 0.2663 0.237 0.2417 0.292 ...
##  $ fBodyBodyAccJerkMag.mean..     : num  -0.933 -0.985 -0.976 -0.962 -0.977 ...
##  $ fBodyBodyAccJerkMag.meanFreq.. : num  0.266 0.342 0.239 0.274 0.197 ...
##  $ fBodyBodyGyroMag.mean..        : num  -0.862 -0.972 -0.965 -0.962 -0.968 ...
##  $ fBodyBodyGyroMag.meanFreq..    : num  -0.1398 0.0186 -0.0229 -0.2599 0.1024 ...
##  $ fBodyBodyGyroJerkMag.mean..    : num  -0.942 -0.99 -0.984 -0.984 -0.985 ...
##  $ fBodyBodyGyroJerkMag.meanFreq..: num  0.1765 0.2648 0.1107 0.2029 0.0247 ...
##  $ tBodyAcc.std...X               : num  -0.928 -0.974 -0.983 -0.954 -0.966 ...
##  $ tBodyAcc.std...Y               : num  -0.837 -0.98 -0.962 -0.942 -0.969 ...
##  $ tBodyAcc.std...Z               : num  -0.826 -0.984 -0.964 -0.963 -0.969 ...
##  $ tGravityAcc.std...X            : num  -0.897 -0.959 -0.983 -0.921 -0.946 ...
##  $ tGravityAcc.std...Y            : num  -0.908 -0.988 -0.981 -0.97 -0.986 ...
##  $ tGravityAcc.std...Z            : num  -0.852 -0.984 -0.965 -0.976 -0.977 ...
##  $ tBodyAccJerk.std...X           : num  -0.958 -0.986 -0.981 -0.978 -0.983 ...
##  $ tBodyAccJerk.std...Y           : num  -0.924 -0.983 -0.969 -0.942 -0.965 ...
##  $ tBodyAccJerk.std...Z           : num  -0.955 -0.988 -0.982 -0.979 -0.985 ...
##  $ tBodyGyro.std...X              : num  -0.874 -0.988 -0.975 -0.973 -0.979 ...
##  $ tBodyGyro.std...Y              : num  -0.951 -0.982 -0.977 -0.961 -0.977 ...
##  $ tBodyGyro.std...Z              : num  -0.908 -0.96 -0.964 -0.962 -0.961 ...
##  $ tBodyGyroJerk.std...X          : num  -0.919 -0.993 -0.98 -0.975 -0.983 ...
##  $ tBodyGyroJerk.std...Y          : num  -0.968 -0.99 -0.987 -0.987 -0.984 ...
##  $ tBodyGyroJerk.std...Z          : num  -0.958 -0.988 -0.983 -0.984 -0.99 ...
##  $ tBodyAccMag.std..              : num  -0.795 -0.973 -0.964 -0.931 -0.959 ...
##  $ tGravityAccMag.std..           : num  -0.795 -0.973 -0.964 -0.931 -0.959 ...
##  $ tBodyAccJerkMag.std..          : num  -0.928 -0.986 -0.976 -0.961 -0.977 ...
##  $ tBodyGyroMag.std..             : num  -0.819 -0.961 -0.954 -0.947 -0.958 ...
##  $ tBodyGyroJerkMag.std..         : num  -0.936 -0.99 -0.983 -0.983 -0.984 ...
##  $ fBodyAcc.std...X               : num  -0.924 -0.973 -0.984 -0.952 -0.965 ...
##  $ fBodyAcc.std...Y               : num  -0.834 -0.981 -0.964 -0.946 -0.973 ...
##  $ fBodyAcc.std...Z               : num  -0.813 -0.985 -0.963 -0.962 -0.966 ...
##  $ fBodyAccJerk.std...X           : num  -0.964 -0.987 -0.983 -0.98 -0.986 ...
##  $ fBodyAccJerk.std...Y           : num  -0.932 -0.985 -0.971 -0.944 -0.966 ...
##  $ fBodyAccJerk.std...Z           : num  -0.961 -0.989 -0.984 -0.98 -0.986 ...
##  $ fBodyGyro.std...X              : num  -0.882 -0.989 -0.976 -0.975 -0.981 ...
##  $ fBodyGyro.std...Y              : num  -0.951 -0.982 -0.977 -0.956 -0.977 ...
##  $ fBodyGyro.std...Z              : num  -0.917 -0.963 -0.967 -0.966 -0.963 ...
##  $ fBodyAccMag.std..              : num  -0.798 -0.975 -0.968 -0.937 -0.963 ...
##  $ fBodyBodyAccJerkMag.std..      : num  -0.922 -0.985 -0.975 -0.958 -0.976 ...
##  $ fBodyBodyGyroMag.std..         : num  -0.824 -0.961 -0.955 -0.947 -0.959 ...
##  $ fBodyBodyGyroJerkMag.std..     : num  -0.933 -0.989 -0.983 -0.983 -0.983 ...
```

###Variable 1
Subject.Activity is a factor variable of 180 levels corresponding to 30 subjects with 6 activities each.

###Variables 2-80
The numerical variables are normalized to the range between -1 to 1 and are therefore dimensionless. Each variable represents the average of more than 10000 observations for each Subject and each Activity. The explanation of variable names can be found in *features_info.txt* file coming with raw data.

##Sources
This CodeBook was prepared with the template available at
https://gist.github.com/JorisSchut/dbc1fc0402f28cad9b41
